<div class="row center-row" style="margin-top:9%">
	<div class="col-md-12">
		<h1> SHOW de DATA </h1>

		<b>Liste des Serres disponibles</b><br/>
		<% unless @greenhouses.blank? %>
		<ol>
			<% @greenhouses.each do |y| %>
							<li><b><%= y.serial_nbr %></b> --- <% if @selected_greenhouse.id == y.id %> Serre actuellement selectionnée <% else %> <%= link_to "Choisir cette serre", show_data_pages_path(id: params[:id], selected_greenhouse: y.id) %><% end %></li>
		<% end %>
		</ol>
		<% else %>
			Aucune serre n'est associée à cette école <br/>
		<% end %>

		<div style="width:100%;height:450px;">
		<svg id="chart">
		</svg>
		<% @value_types.collect(&:name).each do |v|%>
		<div id="<%= v %>-value" data-source="<%=  ( ["#{VALUE_TYPES[:"#{v}"][0]}"] + instance_variable_get("@#{v}_values").collect{ |y| y.value}).join('!')  %>"></div>
		<div id="<%= v %>-date" data-source="<%= (['x'] + @temperature_values.collect{ |y| y.created_at.iso8601}).join('!')  %>"></div>
		<% end %>  		
		</div>

<b>Liste des valeurs pour chaque types<b><br/><br/>
		<% @value_types.each do |y| %>
				<b> <%= VALUE_TYPES[:"#{y.name}"][0] %> </b>
				<table class='table table-hover table-bordered white-back'>
					<thead>
						<tr style="background-color:white;">
							<th> ID </th>
							<th> DataCard ID </th>
							<th> Date </th>
							<th> Valeur </th>
							<th> Valeur cible du moment </th>
						</tr>
					</thead>
					<tbody>
						<% instance_variable_get("@#{y.name}_values").each do |k,v| %>
								<tr>
										<td>
												<%= k.id %>
										</td>
										<td>
												<%= k.data_card_id %>
										</td>
										<td>
												<%= convert_date(k.created_at) %>
										</td>
										<td>
												<%= print_value(k.value,y.name) %>
										</td>
										<td>
												<%= print_value(@hash_target_values[:"id#{k.id}"], y.name) %>
										</td>
								</tr>
						<% end %>
				</tbody>
			</table>
			<br/>	
		<% end %>
	</div>
</div>
<br/>
<br/>

<%= javascript_include_tag "data_show.js" %>